# 基于iOS平台蓝牙通信的小车控制

## 摘要
本项目通过改造遥控小车的控制电路与单片机程序，配合开发iOS平台上的控制程序，实现了在iOS平台上利用蓝牙技术遥控小车。
### 关键字: 单片机 串口通讯 iOS应用程序 iOS蓝牙技术 BTStack

## 项目总览
### 背景

智能手机近两年以不可思议的速度在消费电子市场攻城略地，亲民的价格与强大功能无疑是这股趋势的发动机。当这块屏幕渐渐成为大多数人了解世界的第三只眼睛，以及与世界交互的窗口时，我们站在技术的荒原上，理应对于科技有更高的执念。亦即探索科技的边界，探索工具最多能实现怎样不可思议的任务。

科技创新实践课在我的本科求学生涯中一直扮演一个非常重要的角色。在我大一懵懂无知的时候，这门课程就用一辆支离破碎的小车拖着我的小手，闯入了光怪陆离的电子信息世界。  

本项目再一次给我们提供了一个绝好的机会，从实践的角度去探索手机可以实现怎样的任务，去理解一些耳熟能详，却又不那么清晰的技术。比如单片机，比如蓝牙，比如串口通信，比如移动开发。本项目的完成，也为我们继续研究短距离无线通信的应用打下了基础。

### 项目任务
1. 改造遥控小车，使之能够接收iOS移动设备通过蓝牙技术传过来的控制信号，并根据控制信号作出相应的移动。
2. 在iOS移动设备上开发一个直观易用的遥控应用。

## 设计思路
### 遥控小车改装
遥控小车的改装主要有三种思路：  

1. 自制小车的机械结构和控制、逻辑、通讯、供电电路。
2. 保留遥控小车的机械结构，改造其逻辑和通讯电路。
3. 保留遥控小车的全部元件，改造其遥控器。

从思路1到思路3难度是逐渐降低的，但思路2和思路3实现难度的区别不大，甚至更加直接。综合考虑之后，我们选择思路2。

### iOS控制程序
为了充分发掘和展示移动设备在人机交互方面无与伦比的直观性，我们从触屏，陀螺仪，多点触控等角度对iOS控制程序作出了如下几种设计：

1. 虚拟按键。也就是少年们比较熟悉的手柄（d-pad或joypad），只不过方向按键变成了触屏上的按钮，凹凸感也只能用仿真贴图来作出阴影效果，聊做追忆。
2. 重力感应控制。将设备本身的空间座标映射到对小车的控制上。
3. 手势控制。用多个手指在屏幕上的张和（官方术语为pinch，即“捏“的意思，已经成为人机交互的典范用例）来表示小车的速度，用两只手指在屏幕上的相对角度来表示小车的方向。

在熟悉的领域，我们更愿意肩负起应有的责任。于是上述三种操作方式我们逐一实现了。


## 小车改装与单片机

## iOS控制程序
### iOS开发总览
### iOS平台对蓝牙模块的限制
### BTStack
### Limo类的设计
### 控制器的设计
首先介绍遥控小车对信号的处理方式。小车端接受到一个信号——比如“左转”，其实表示的是小车的运动状态变为持续性的左转，而不是左转一下。  
指出这一点的原因在于，这种信号处理方式简化了控制器的逻辑，直接影响了控制器的设计方式。
### 开发中遇到的问题

## 总结
## 致谢











